"use strict";(self["webpackChunkpc_vue"]=self["webpackChunkpc_vue"]||[]).push([[798],{8798:function(t,e,i){i.r(e),i.d(e,{default:function(){return o}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"Monitoring-list"},[e("h2",[t._v("监测列表")]),e("hr"),e("div",{staticClass:"input"},[e("div",{staticClass:"btn"},t._l(t.sum,(function(i,a){return e("button",{key:a,class:t.setOption2.find((t=>t==i[0]))?"active":"",attrs:{size:"mini"},on:{click:function(e){return t.btnClick(i)}}},[t._v(" "+t._s(i[0]+"("+i[1]+")")+" ")])})),0),e("el-select",{staticStyle:{width:"300px","margin-top":"10px"},attrs:{filterable:"",clearable:"",placeholder:"请输入公司名称"},on:{change:t.onSearch},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},t._l(t.setOption,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),e("div",{staticClass:"content"},[e("div",{staticClass:"title"},[t._v(" 已监测 "),e("span",{staticClass:"active"},[t._v(t._s(t.tableData.length))]),t._v(" 家企业 ")]),e("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.tableList,border:"",height:"700px"}},[e("el-table-column",{attrs:{label:"企业名称","min-width":"170","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{staticClass:"name"},[e("div",{staticClass:"link"},[e("el-link",{attrs:{type:"primary",underline:!1}},[t._v(t._s(i.row["K02_企业"]))]),e("el-tag",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.jump(i.row["K02_企业"],i.row["K01_分组"],"高风险")}}},[t._v("高风险:"+t._s(i.row["K11_高风险"]))]),e("el-tag",{attrs:{size:"mini",type:"warning"},on:{click:function(e){return t.jump(i.row["K02_企业"],i.row["K01_分组"],"警示")}}},[t._v("警示:"+t._s(i.row["K12_警示"]))]),e("el-tag",{attrs:{size:"mini",type:"success"},on:{click:function(e){return t.jump(i.row["K02_企业"],i.row["K01_分组"],"利好")}}},[t._v("利好:"+t._s(i.row["K13_利好"]))]),e("el-tag",{attrs:{size:"mini"},on:{click:function(e){return t.jump(i.row["K02_企业"],i.row["K01_分组"],"提示")}}},[t._v("提示:"+t._s(i.row["K14_提示"]))]),e("el-tag",{attrs:{effect:"dark",size:"mini"},on:{click:function(e){return t.jump(i.row["K02_企业"],i.row["K01_分组"],"","司法风险")}}},[t._v("司法风险:"+t._s(i.row["K15_司法风险"]))]),e("el-tag",{attrs:{effect:"dark",size:"mini"},on:{click:function(e){return t.jump(i.row["K02_企业"],i.row["K01_分组"],"","工商风险")}}},[t._v("工商风险:"+t._s(i.row["K16_工商风险"]))]),e("el-tag",{attrs:{effect:"dark",size:"mini"},on:{click:function(e){return t.jump(i.row["K02_企业"],i.row["K01_分组"],"","经营风险")}}},[t._v("经营风险:"+t._s(i.row["K17_经营风险"]))]),e("el-tag",{attrs:{effect:"dark",size:"mini"},on:{click:function(e){return t.jump(i.row["K02_企业"],i.row["K01_分组"],"","经营状况")}}},[t._v("经营状况:"+t._s(i.row["K18_经营状况"]))])],1),e("el-link",{attrs:{type:"warning",underline:!1},on:{click:function(e){return t.jump(i.row["K02_企业"],i.row["K01_分组"])}}},[t._v("查看历史监测动态>")])],1)]}}])}),e("el-table-column",{attrs:{prop:"K03_监测开始日期",label:"监测时间","min-width":"30",align:"center"}}),e("el-table-column",{attrs:{label:"监测分组","min-width":"40",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{staticClass:"type",on:{click:function(e){return t.jump("",i.row["K01_分组"])}}},[t._v(t._s(i.row["K01_分组"]))])]}}])})],1)],1),e("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-size":t.pageSize,layout:"prev, pager, next",total:t.tableData.length},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)},n=[],s=(i(2575),{data(){return{tableData:[],tableList:[],pageSize:14,currentPage:1,search2:"",search:"",res:this.$store.state.sumList,setOption2:[],setOption:["全部"],sum:this.$store.state.sum}},methods:{jump(t,e,i,a){this.$router.push({name:"details",params:{GSname:t,type:e,a:i,b:a}})},btnClick(t){"ALL"==t[0]?this.setOption2=["ALL"]:(this.setOption2=this.setOption2.filter((t=>"ALL"!=t)),-1!=this.setOption2.indexOf(t[0])?this.setOption2=this.setOption2.filter((e=>e!=t[0])):this.setOption2.push(t[0])),this.onSearch()},onSearch(){this.setOption=["全部"],this.tableData=this.res,this.tableData=this.tableData.filter((t=>{let e=!0,i=!0;return 0!=this.setOption2.length&&-1==this.setOption2.indexOf("ALL")&&(i=this.setOption2.find((e=>e==t.K01_分组))),this.search&&"全部"!=this.search&&(e=t.K02_企业==this.search),e&&i})),console.log(this.tableData,this.setOption2),this.tableData.forEach((t=>{-1==this.setOption.indexOf(t.K02_企业)&&this.setOption.push(t.K02_企业)})),this.currentPage=1,this.tableList=this.currentChangePage(this.pageSize,this.currentPage)},handleSizeChange(t){this.pageSize=t,this.tableList=this.currentChangePage(t,this.currentPage)},handleCurrentChange(t){this.currentPage=t,this.tableList=this.currentChangePage(this.pageSize,t)},currentChangePage(t,e){const i=[];return this.tableData.forEach(((a,n)=>{t*(e-1)<=n&&n<=t*e-1&&i.push(a)})),i}},created(){this.sum=this.sum.sort(((t,e)=>e[1]-t[1])),this.tableData=this.res,this.tableList=this.currentChangePage(this.pageSize,this.currentPage),this.tableData.forEach((t=>{-1==this.setOption.indexOf(t.K02_企业)&&this.setOption.push(t.K02_企业)}))}}),r=s,l=i(3945),c=(0,l.Z)(r,a,n,!1,null,"c0e4aa7a",null),o=c.exports}}]);
//# sourceMappingURL=798.b4da86ac.js.map