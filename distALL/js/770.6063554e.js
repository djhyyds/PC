"use strict";(self["webpackChunkpc_vue"]=self["webpackChunkpc_vue"]||[]).push([[770],{9770:function(e,l,a){a.r(l),a.d(l,{default:function(){return c}});var t=function(){var e=this,l=e._self._c;return l("div",{staticClass:"details"},[l("h2",[e._v("监测动态")]),l("hr"),l("div",{staticClass:"input"},[l("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[l("el-form-item",[l("el-select",{staticStyle:{width:"130px"},attrs:{placeholder:"风险级别"},on:{change:e.onSubmit},model:{value:e.formInline.region,callback:function(l){e.$set(e.formInline,"region",l)},expression:"formInline.region"}},[l("el-option",{attrs:{label:"全部",value:""}}),l("el-option",{attrs:{label:"高风险",value:"高风险"}}),l("el-option",{attrs:{label:"警示",value:"警示"}}),l("el-option",{attrs:{label:"提示",value:"提示"}}),l("el-option",{attrs:{label:"利好",value:"利好"}})],1)],1),l("el-form-item",[l("el-cascader",{ref:"myCascadeRef",attrs:{options:e.options,"show-all-levels":!1,props:{checkStrictly:!0,expandTrigger:"hover"},"popper-class":"myCascade",filterable:""},scopedSlots:e._u([{key:"default",fn:function({node:a,data:t}){return[l("div",{on:{click:()=>e.onItemClick(a,t)}},[l("span",[e._v(e._s(t.label))])])]}}]),model:{value:e.value,callback:function(l){e.value=l},expression:"value"}})],1),l("el-form-item",[l("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请输入公司名称"},on:{change:e.onSearch},model:{value:e.search,callback:function(l){e.search=l},expression:"search"}},e._l(e.setOption,(function(e){return l("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),this.$store.state.show?l("el-form-item",[l("el-select",{attrs:{filterable:"",clearable:"",multiple:"","collapse-tags":"",placeholder:"请选择分组"},on:{change:e.onSearch},model:{value:e.search2,callback:function(l){e.search2=l},expression:"search2"}},e._l(e.setOption2,(function(e){return l("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1):e._e(),l("el-form-item",[l("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions,"value-format":"timestamp","default-time":["00:00:00","23:59:59"]},on:{change:function(l){return e.DateTime()}},model:{value:e.value2,callback:function(l){e.value2=l},expression:"value2"}})],1)],1)],1),l("div",{staticClass:"content"},[l("span",[e._v(" 为你找到 "),l("span",{staticClass:"active"},[e._v(e._s(e.tableCopeTableList.length))]),e._v(" 条监测动态 ")]),e._v("   "),l("span",[e._v(" 共涉及 "),l("span",{staticClass:"active"},[e._v(e._s(e.setOption.length-1))]),e._v(" 家企业 ")]),l("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData,border:"",height:"590px"}},[l("el-table-column",{attrs:{prop:"日期",label:"更新时间",width:"150",align:"center"}}),l("el-table-column",{attrs:{label:"监测主体","min-width":"200","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[l("el-link",{attrs:{type:"primary",underline:!1}},[e._v(e._s(a.row["公司"]))]),l("br")]}}])}),l("el-table-column",{attrs:{label:"风险级别","min-width":"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return["警示"==a.row["等级"]?l("el-link",{attrs:{type:"warning",underline:!1}},[e._v(e._s(a.row["等级"]+"信息"))]):"利好"==a.row["等级"]?l("el-link",{attrs:{type:"success",underline:!1}},[e._v(e._s(a.row["等级"]+"信息"))]):"高风险"==a.row["等级"]?l("el-link",{attrs:{type:"danger",underline:!1}},[e._v(e._s(a.row["等级"]+"信息"))]):l("span",{staticStyle:{color:"#aa77cc"}},[e._v(e._s(a.row["等级"]+"信息"))])]}}])}),l("el-table-column",{attrs:{prop:"类型",label:"动态类型",width:"120"}}),l("el-table-column",{attrs:{label:"动态内容","min-width":"200","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[l("span",[e._v(e._s(a.row.详情))])]}}])}),l("el-table-column",{attrs:{label:"动态详情","min-width":"200","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[l("span",{ref:"bei"},[e._v(e._s(e.bei(a.row.备注)))]),a.row.备注.length>70?l("el-link",{attrs:{type:"primary"},on:{click:function(l){return e.open(a.row.备注)}}},[e._v("详情")]):e._e()]}}])}),l("el-table-column",{attrs:{prop:"分组",label:"监测分组",width:"120",align:"center"}})],1)],1),l("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"prev, pager, next",total:e.tableCopeTableList.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(l){e.currentPage=l},"update:current-page":function(l){e.currentPage=l}}}),l("el-dialog",{attrs:{title:"详情",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(l){e.dialogVisible=l}}},[l("span",[e._v(e._s(e.diaText))]),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{type:"primary"},on:{click:function(l){e.dialogVisible=!1}}},[e._v("确 定")])],1)])],1)},s=[];a(2575);function i(e){if(e.parent){const l=i(e.parent);return l.push(e.data.value),l}return[e.value]}const n=(e,l,a,t,s,i,n)=>n.filter((n=>{let r=!0,o=!0,u=!0,h=!0,c=!0,b=!0,v=!0;return e&&(r=n.等级===e),l&&(o=n.类型===l),a&&(u=n.风险维度===a),t&&"全部"!=t&&(h=n.公司===t),s&&(c=1e3*n.时间戳>=s[0]&&1e3*n.时间戳<=s[1]),console.log(s,"eeeeeeeeee"),0!=i.length&&-1==i.indexOf("全部")&&(b=i.find((e=>e==n.分组))),r&&o&&u&&h&&c&&b&&v}));var r={data(){return{value2:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick(e){const l=new Date,a=new Date;a.setTime(16690248e5),e.$emit("pick",[a,l])}},{text:"最近一个月",onClick(e){const l=new Date,a=new Date;a.setTime(16670376e5),e.$emit("pick",[a,l])}}]},diaText:"",dialogVisible:!1,date:this.$store.state.date,setOption:["全部"],setOption2:this.$store.state.setOption,search2:this.$store.state.search,search:"",input:"",formInline:{region:""},value:"",options:[{value:"",label:"全部"},{value:"司法风险",label:"司法风险",children:[{label:"法律诉讼",value:"法律诉讼"},{label:"法院公告",value:"法院公告"},{label:"失信被执行人",value:"失信被执行人"},{label:"被执行人",value:"被执行人"},{label:"开庭公告",value:"开庭公告"},{label:"司法协助",value:"司法协助"},{label:"送达公告",value:"送达公告"},{label:"立案信息",value:"立案信息"},{label:"限制消费令",value:"限制消费令"},{label:"终本案件",value:"终本案件"},{label:"涉金融黑名单",value:"涉金融黑名单"},{label:"破产重整",value:"破产重整"},{label:"询价评估",value:"询价评估"}]},{label:"工商风险",value:"工商风险",children:[{label:"股权变更",value:"股权变更"},{label:"股权信息",value:"股权信息"},{label:"股东变更",value:"股东变更"},{label:"大股东变更",value:"大股东变更"},{label:"主要人员变更",value:"主要人员变更"},{label:"任职信息",value:"任职信息"},{label:"企业状态变更",value:"企业状态变更"},{label:"企业类型变更",value:"企业类型变更"},{label:"法定代表人变更",value:"法定代表人变更"},{label:"企业名称变更",value:"企业名称变更"},{label:"注册资本变更",value:"注册资本变更"},{label:"登记机关变更",value:"登记机关变更"},{label:"注册地址变更",value:"注册地址变更"},{label:"经营范围变更",value:"经营范围变更"},{label:"机构成员",value:"机构成员"}]},{label:"经营风险",value:"经营风险",children:[{label:"经营异常",value:"经营异常"},{label:"严重违法",value:"严重违法"},{label:"股权出质",value:"股权出质"},{label:"动产抵押",value:"动产抵押"},{label:"欠税公告",value:"欠税公告"},{label:"司法拍卖",value:"司法拍卖"},{label:"清算信息",value:"清算信息"},{label:"税收违法",value:"税收违法"},{label:"简易注销",value:"简易注销"},{label:"行政处罚",value:"行政处罚"},{label:"环保处罚",value:"环保处罚"},{label:"公示催告",value:"公示催告"},{label:"土地抵押",value:"土地抵押"},{label:"股权质押",value:"股权质押"},{label:"股权冻结",value:"股权冻结"},{label:"注销备案",value:"注销备案"},{label:"管理基金",value:"管理基金"}]},{label:"经营状况",value:"经营状况",children:[{label:"投融资动态",value:"投融资动态"},{label:"招投标",value:"招投标"},{label:"债券信息",value:"债券信息"},{label:"商标信息",value:"商标信息"},{label:"专利信息",value:"专利信息"},{label:"软件著作权",value:"软件著作权"},{label:"购地信息",value:"购地信息"},{label:"税务评级",value:"税务评级"},{label:"抽查检查",value:"抽查检查"},{label:"产品信息",value:"产品信息"},{label:"进出口信用",value:"进出口信用"},{label:"知识产权",value:"知识产权"},{label:"土地转让",value:"土地转让"},{label:"地块公示",value:"地块公示"},{label:"行政许可",value:"行政许可"},{label:"电信许可",value:"电信许可"},{label:"一般纳税人",value:"一般纳税人"},{label:"产品召回",value:"产品召回"},{label:"上榜榜单",value:"上榜榜单"},{label:"食品安全",value:"食品安全"},{label:"客户供应商",value:"客户供应商"},{label:"信用评级",value:"信用评级"},{label:"公告研报",value:"公告研报"},{label:"资产交易",value:"资产交易"}]}],tableData:[],tableCopeTableList:[],pageSize:10,currentPage:1,risk:"",res:"",result:"",showBei:!1}},methods:{bei(e){return e.length>70?(this.showBei=!0,e.substr(0,70)+"..."):e},handleClose(){this.dialogVisible=!1},open(e){this.dialogVisible=!0,this.diaText=e},DateTime(){this.into()},onItemClick(e){this.$refs.myCascadeRef.dropDownVisible=!1,this.value=i(e),this.into()},handleSizeChange(e){this.pageSize=e,this.tableData=this.currentChangePage(e,this.currentPage)},handleCurrentChange(e){this.currentPage=e,this.tableData=this.currentChangePage(this.pageSize,e)},currentChangePage(e,l){const a=[];return this.tableCopeTableList.forEach(((t,s)=>{e*(l-1)<=s&&s<=e*l-1&&a.push(t)})),a},onSubmit(){this.currentPage=1,this.into()},into(){let e,l;this.currentPage=1,this.setOption=["全部"],this.risk=this.formInline.region,Array.isArray(this.value)?1==this.value.length?l=this.value[0]:e=this.value[1]:l=this.value,this.tableCopeTableList=n(this.risk,e,l,this.search,this.value2,this.search2,this.res),this.tableData=this.currentChangePage(this.pageSize,this.currentPage),this.tableCopeTableList.forEach((e=>{-1==this.setOption.indexOf(e.公司)&&this.setOption.push(e.公司)}))},onSearch(){"全部"==this.search2[this.search2.length-1]||0==this.search2.length?this.search2=["全部"]:this.search2=this.search2.filter((e=>"全部"!=e)),this.$store.commit("SearchChange",this.search2),this.into()}},created(){this.res=this.$store.state.res,this.formInline.region=this.$route.params.a,this.$route.params.GSname&&(this.search=this.$route.params.GSname),this.$route.params.type&&(this.search2=[this.$route.params.type]),this.$route.params.name?this.value=[0,this.$route.params.name]:this.$route.params.b&&(this.value=this.$route.params.b),2592e3==this.date?this.value2=[this.$store.state.nowDate-2592e6,this.$store.state.nowDate]:this.value2=[this.$store.state.nowDate-6048e5,this.$store.state.nowDate],this.into()},beforeMount(){this.tableData=this.currentChangePage(this.pageSize,this.currentPage)},mounted(){}},o=r,u=a(3945),h=(0,u.Z)(o,t,s,!1,null,null,null),c=h.exports}}]);
//# sourceMappingURL=770.6063554e.js.map