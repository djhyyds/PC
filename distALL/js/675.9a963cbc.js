"use strict";(self["webpackChunkpc_vue"]=self["webpackChunkpc_vue"]||[]).push([[675],{1675:function(t,e,s){s.r(e),s.d(e,{default:function(){return c}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"risk"},[e("h2",[t._v("风险维度")]),e("hr"),e("div",{staticClass:"input"},[this.$store.state.show?e("el-select",{attrs:{multiple:"","collapse-tags":"",filterable:"",clearable:"",placeholder:"请选择分组"},on:{change:t.onSearch},model:{value:t.search2,callback:function(e){t.search2=e},expression:"search2"}},t._l(t.setOption2,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1):t._e(),e("div"),e("div",[t._v(" 动态时间： "),e("span",{class:604800==t.date?"active":"",on:{click:function(e){return t.DateTime(604800)}}},[t._v("近7天")]),e("span",{class:2592e3==t.date?"active":"",on:{click:function(e){return t.DateTime(2592e3)}}},[t._v("近30天")])])],1),e("div",{staticClass:"action"},[e("div",{staticClass:"code"},[e("div",[e("p",[t._v("司法风险")]),e("span",[t._v(t._s(t.result["司法风险"]))]),e("div",{on:{click:function(e){return t.filter("司法风险")}}},[t._v("查看详情")])]),e("div",{ref:"main",staticStyle:{width:"150px",height:"150px"},attrs:{id:"main"}})]),e("div",{staticClass:"code"},[e("div",[e("p",[t._v("工商风险")]),e("span",[t._v(t._s(t.result["工商风险"]))]),e("div",{on:{click:function(e){return t.filter("工商风险")}}},[t._v("查看详情")])]),e("div",{ref:"main1",staticStyle:{width:"150px",height:"150px"},attrs:{id:"main1"}})]),e("div",{staticClass:"code"},[e("div",[e("p",[t._v("经营风险")]),e("span",[t._v(t._s(t.result["经营风险"]))]),e("div",{on:{click:function(e){return t.filter("经营风险")}}},[t._v("查看详情")])]),e("div",{ref:"main2",staticStyle:{width:"150px",height:"150px"},attrs:{id:"main2"}})]),e("div",{staticClass:"code"},[e("div",[e("p",[t._v("经营状况")]),e("span",[t._v(t._s(t.result["经营状况"]))]),e("div",{on:{click:function(e){return t.filter("经营状况")}}},[t._v("查看详情")])]),e("div",{ref:"main3",staticStyle:{width:"150px",height:"150px"},attrs:{id:"main3"}})])]),e("div",{staticClass:"code2"},[e("div",{ref:"main4",staticStyle:{width:"100%",height:"500px"},attrs:{id:"main4"}})])])},a=[],r=(s(2575),s(3724)),n={data(){return{date:this.$store.state.date,ECres:this.$store.state.ECres,myChart:"",myChart1:"",myChart2:"",myChart3:"",myChart4:"",setOption2:this.$store.state.setOption,search2:this.$store.state.search,res2:this.$store.state.res,res:[],result:{"司法风险":0,"工商风险":0,"经营风险":0,"经营状况":0}}},methods:{onSearch(){"全部"==this.search2[this.search2.length-1]||0==this.search2.length?this.search2=["全部"]:this.search2=this.search2.filter((t=>"全部"!=t)),this.$store.commit("SearchChange",this.search2),this.into()},into(){this.result={"司法风险":0,"工商风险":0,"经营风险":0,"经营状况":0},this.res=this.res2.filter((t=>0!=this.search2.length&&-1==this.search2.indexOf("全部")?this.$store.state.nowDate/1e3-t.时间戳<=this.date&&this.search2.find((e=>e==t.分组)):this.$store.state.nowDate/1e3-t.时间戳<=this.date)),this.res.forEach((t=>{this.result[t["风险维度"]]?this.result[t["风险维度"]]++:this.result[t["风险维度"]]=1})),0==this.res.length&&(this.res.length=1),this.show(),this.show1(),this.show2(),this.show3(),this.show4()},DateTime(t){this.$store.commit("DateChange",t),this.date=this.$store.state.date,this.into()},filter(t){this.$router.push({name:"details",params:{result:"风险维度",b:t}})},show(){let t;const e=[{value:(this.result["司法风险"]/this.res.length*100).toFixed(2),detail:{valueAnimation:!1,offsetCenter:["0%","0%"]}}];t={series:[{type:"gauge",startAngle:90,endAngle:-270,pointer:{show:!1},progress:{show:!0,overlap:!1,roundCap:!1,clip:!1},axisLine:{lineStyle:{width:20}},splitLine:{show:!1,distance:0,length:10},axisTick:{show:!1},axisLabel:{show:!1,distance:50},data:e,detail:{fontSize:20,color:"auto",formatter:"{value}%"}}]},t&&this.myChart.setOption(t)},show1(){let t;const e=[{value:(this.result["工商风险"]/this.res.length*100).toFixed(2),detail:{valueAnimation:!1,offsetCenter:["0%","0%"]}}];t={series:[{type:"gauge",startAngle:90,endAngle:-270,pointer:{show:!1},progress:{show:!0,overlap:!1,roundCap:!1,clip:!1},axisLine:{lineStyle:{width:20}},splitLine:{show:!1,distance:0,length:10},axisTick:{show:!1},axisLabel:{show:!1,distance:50},data:e,detail:{fontSize:20,color:"auto",borderColor:"auto",formatter:"{value}%"}}]},t&&this.myChart1.setOption(t)},show2(){let t;const e=[{value:(this.result["经营风险"]/this.res.length*100).toFixed(2),detail:{valueAnimation:!1,offsetCenter:["0%","0%"]}}];t={series:[{type:"gauge",startAngle:90,endAngle:-270,pointer:{show:!1},progress:{show:!0,overlap:!1,roundCap:!1,clip:!1},axisLine:{lineStyle:{width:20}},splitLine:{show:!1,distance:0,length:10},axisTick:{show:!1},axisLabel:{show:!1,distance:50},data:e,detail:{fontSize:20,color:"auto",formatter:"{value}%"}}]},t&&this.myChart2.setOption(t)},show3(){let t;const e=[{value:(this.result["经营状况"]/this.res.length*100).toFixed(2),detail:{valueAnimation:!1,offsetCenter:["0%","0%"]}}];t={series:[{type:"gauge",startAngle:90,endAngle:-270,pointer:{show:!1},progress:{show:!0,overlap:!1,roundCap:!1,clip:!1},axisLine:{lineStyle:{width:20}},splitLine:{show:!1,distance:0,length:10},axisTick:{show:!1},axisLabel:{show:!1,distance:50},data:e,detail:{fontSize:20,color:"auto",formatter:"{value}%"}}]},t&&this.myChart3.setOption(t)},show4(){let t,e,s=!0;e=604800==this.date?7:30;let i=[],a=[];this.search2.length&&this.search2.forEach((t=>{a=this.ECres.find((i=>(s=0!=this.search2.length&&-1==this.search2.indexOf("全部")?i.group===t:"all"==i.group?"all"==i.group:"all"===i.group.substr(i.group.length-3,i.group.length-1)?"all"===i.group.substr(i.group.length-3,i.group.length-1):"人法"===i.group.substr(0,2)||"数科"===i.group.substr(0,2),i["info_"+e]&&s))),console.log(a,"444444444444"),i.push(a)})),console.log(i,"ssssssssssss");let r=null;if(1==i.length)r=i[0];else{let t=[];t=i.reduce(((t,s)=>s["info_"+e].concat(t)),[]);let s={},a=[];t.map((function(t){s[t.name]?a.filter((e=>e.name==t.name))[0].value+=t.value:(a.push(JSON.parse(JSON.stringify(t))),s[t.name]=!0),r={},r["info_"+e]=a})),console.log(t,i,a)}let n=r["info_"+e];n=n.sort(((t,e)=>{let s=t["value"],i=e["value"];return i-s})),t={series:{type:"pie",radius:[80,160],emphasis:{focus:"self"},left:"center",width:"700px",label:{formatter:"{name|{b}:{c}，{d}%} \n",minMargin:1,edgeDistance:1,lineHeight:1,rich:{name:{fontSize:"13",color:"auto"}}},data:n}},console.log(t),t&&this.myChart4.setOption(t),this.myChart4.on("click",(t=>{this.$router.push({name:"details",params:{name:t.name}})}))}},mounted(){let t=this.$refs.main1;this.myChart1=r.S1(t);let e=this.$refs.main2;this.myChart2=r.S1(e);let s=this.$refs.main3;this.myChart3=r.S1(s);let i=this.$refs.main;this.myChart=r.S1(i);let a=this.$refs.main4;this.myChart4=r.S1(a),this.into()},created(){}},h=n,l=s(3945),o=(0,l.Z)(h,i,a,!1,null,"4928c93a",null),c=o.exports}}]);
//# sourceMappingURL=675.9a963cbc.js.map