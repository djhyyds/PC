"use strict";(self["webpackChunkpc_vue"]=self["webpackChunkpc_vue"]||[]).push([[439],{3928:function(t,e,s){s.r(e),s.d(e,{default:function(){return c}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"about"},[e("h2",[t._v("风险级别")]),e("hr"),e("div",{staticClass:"input"},[this.$store.state.show?e("el-select",{attrs:{multiple:"","collapse-tags":"",filterable:"",clearable:"",placeholder:"请选择分组"},on:{change:t.onSearch},model:{value:t.search2,callback:function(e){t.search2=e},expression:"search2"}},t._l(t.setOption2,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1):e("div"),e("div",[t._v(" 动态时间： "),e("span",{class:604800==t.date?"active":"",on:{click:function(e){return t.DateTime(604800)}}},[t._v("近7天")]),e("span",{class:2592e3==t.date?"active":"",on:{click:function(e){return t.DateTime(2592e3)}}},[t._v("近30天")])])],1),e("div",{staticClass:"action"},[e("div",{staticClass:"code"},[e("div",[e("p",[t._v("高风险")]),e("span",[t._v(t._s(t.result["高风险"]))]),e("div",{on:{click:function(e){return t.filter("高风险")}}},[t._v("查看详情")])]),e("div",{ref:"main",staticStyle:{width:"150px",height:"150px"},attrs:{id:"main"}})]),e("div",{staticClass:"code"},[e("div",[e("p",[t._v("警示")]),e("span",[t._v(t._s(t.result["警示"]))]),e("div",{on:{click:function(e){return t.filter("警示")}}},[t._v("查看详情")])]),e("div",{ref:"main1",staticStyle:{width:"150px",height:"150px"},attrs:{id:"main1"}})]),e("div",{staticClass:"code"},[e("div",[e("p",[t._v("提示")]),e("span",[t._v(t._s(t.result["提示"]))]),e("div",{on:{click:function(e){return t.filter("提示")}}},[t._v("查看详情")])]),e("div",{ref:"main2",staticStyle:{width:"150px",height:"150px"},attrs:{id:"main2"}})]),e("div",{staticClass:"code"},[e("div",[e("p",[t._v("利好")]),e("span",[t._v(t._s(t.result["利好"]))]),e("div",{on:{click:function(e){return t.filter("利好")}}},[t._v("查看详情")])]),e("div",{ref:"main3",staticStyle:{width:"150px",height:"150px"},attrs:{id:"main3"}})])]),e("div",{staticClass:"code2"},[e("div",{ref:"main4",staticStyle:{width:"100%",height:"300px"},attrs:{id:"main4"}})])])},a=[],o=(s(2575),s(3724)),r={data(){return{date:"",input:"",setOption2:["全部"],search2:"",result:{"高风险":0,"警示":0,"提示":0,"利好":0},res2:this.$store.state.res,res:[],myChart:"",myChart1:"",myChart2:"",myChart3:"",myChart4:"",ECres:this.$store.state.ECres}},methods:{onSearch(){"全部"==this.search2[this.search2.length-1]||0==this.search2.length?this.search2=["全部"]:this.search2=this.search2.filter((t=>"全部"!=t)),console.log(this.search2),this.$store.commit("SearchChange",this.search2),this.into()},into(){this.result={"高风险":0,"警示":0,"提示":0,"利好":0},this.res=this.res2.filter((t=>0!=this.search2.length&&-1==this.search2.indexOf("全部")?this.$store.state.nowDate/1e3-t.时间戳<=this.date&&this.search2.find((e=>e==t.分组)):this.$store.state.nowDate/1e3-t.时间戳<=this.date)),this.res.forEach((t=>{this.result[t["等级"]]?this.result[t["等级"]]++:this.result[t["等级"]]=1})),0==this.res.length&&(this.res.length=1),this.show5(),this.show1(),this.show2(),this.show3(),this.show4()},DateTime(t){this.$store.commit("DateChange",t),this.date=this.$store.state.date,this.into()},filter(t){this.$router.push({name:"details",params:{result:"等级",a:t}})},show5(){let t,e=[{value:(this.result["高风险"]/this.res.length*100).toFixed(2),detail:{valueAnimation:!1,offsetCenter:["0%","0%"]}}];t={series:[{type:"gauge",startAngle:90,endAngle:-270,pointer:{show:!1},progress:{show:!0,overlap:!1,roundCap:!1,clip:!1,itemStyle:{color:"red"}},axisLine:{lineStyle:{width:20}},splitLine:{show:!1,distance:0,length:10},axisTick:{show:!1},axisLabel:{show:!1,distance:50},data:e,detail:{fontSize:20,color:"red",borderColor:"auto",formatter:"{value}%"}}]},t&&this.myChart.setOption(t,!0)},show1(){let t,e=[{value:(this.result["警示"]/this.res.length*100).toFixed(2),detail:{valueAnimation:!1,offsetCenter:["0%","0%"]}}];t={series:[{type:"gauge",startAngle:90,endAngle:-270,pointer:{show:!1},progress:{show:!0,overlap:!1,roundCap:!1,clip:!1,itemStyle:{color:"#ff7d18"}},axisLine:{lineStyle:{width:20}},splitLine:{show:!1,distance:0,length:10},axisTick:{show:!1},axisLabel:{show:!1,distance:50},data:e,detail:{fontSize:20,color:"#ff7d18",borderColor:"auto",formatter:"{value}%"}}]},t&&this.myChart1.setOption(t,!0)},show2(){let t,e=[{value:(this.result["提示"]/this.res.length*100).toFixed(2),detail:{valueAnimation:!1,offsetCenter:["0%","0%"]}}];t={series:[{type:"gauge",startAngle:90,endAngle:-270,pointer:{show:!1},progress:{show:!0,overlap:!1,roundCap:!1,clip:!1,itemStyle:{color:"#aa77cc"}},axisLine:{lineStyle:{width:20}},splitLine:{show:!1,distance:0,length:10},axisTick:{show:!1},axisLabel:{show:!1,distance:50},data:e,detail:{fontSize:20,color:"#aa77cc",borderColor:"auto",formatter:"{value}%"}}]},t&&this.myChart2.setOption(t,!0)},show3(){let t,e=[{value:(this.result["利好"]/this.res.length*100).toFixed(2),detail:{valueAnimation:!1,offsetCenter:["0%","0%"]}}];t={series:[{type:"gauge",startAngle:90,endAngle:-270,pointer:{show:!1},progress:{show:!0,overlap:!1,roundCap:!1,clip:!1,itemStyle:{color:"#119944",borderColor:"#119944"}},axisLine:{lineStyle:{width:20}},splitLine:{show:!1,distance:0,length:10},axisTick:{show:!1},axisLabel:{show:!1,distance:50},data:e,detail:{fontSize:20,color:"#119944",formatter:"{value}%"}}]},t&&this.myChart3.setOption(t)},show4(){var t;let e,s=!0;e=604800==this.date?7:30;let i=[];this.search2.length&&this.search2.forEach((t=>{let a=this.ECres.find((i=>(s=0!=this.search2.length&&-1==this.search2.indexOf("全部")?i.group===t:"all"==i.group?"all"==i.group:"all"===i.group.substr(i.group.length-3,i.group.length-1)?"all"===i.group.substr(i.group.length-3,i.group.length-1):"人法"===i.group.substr(0,2)||"数科"===i.group.substr(0,2),i["source_"+e]&&s)));i.push(a)}));let a=null;if(1==i.length)a=i[0];else{let t=[[],[],[],[],[]];i.forEach((s=>{t[0]=s["source_"+e][0],t[1].push(s["source_"+e][1]),t[2].push(s["source_"+e][2]),t[3].push(s["source_"+e][3]),t[4].push(s["source_"+e][4])})),t.forEach(((e,s)=>{s>0&&(t[s]=e.reduce(((t,e)=>(e.forEach(((e,s)=>{"number"===typeof t[s]?t[s]+=e:t[s]=e})),t)),[]))})),a={},a["source_"+e]=t}t={legend:{},tooltip:{trigger:"axis"},dataset:{source:a["source_"+e]},xAxis:{type:"category",boundaryGap:!1},yAxis:{gridIndex:0},grid:{top:"20%"},series:[{type:"line",smooth:!0,seriesLayoutBy:"row",symbolSize:5,itemStyle:{normal:{label:{show:!0,position:"top",fontSize:13,textStyle:{color:"auto"}}}},emphasis:{focus:"series"}},{type:"line",smooth:!0,seriesLayoutBy:"row",emphasis:{focus:"series"},symbolSize:5,itemStyle:{normal:{label:{show:!0,position:"top",fontSize:13,textStyle:{color:"auto"}}}}},{type:"line",smooth:!0,seriesLayoutBy:"row",emphasis:{focus:"series"},symbolSize:5,itemStyle:{normal:{label:{show:!0,position:"top",fontSize:13,textStyle:{color:"auto"}}}}},{type:"line",smooth:!0,seriesLayoutBy:"row",emphasis:{focus:"series"},symbolSize:5,itemStyle:{normal:{label:{show:!0,position:"top",fontSize:13,textStyle:{color:"auto"}}}}}]},this.myChart4.setOption(t)}},mounted(){let t=this.$refs.main1;this.myChart1=o.S1(t);let e=this.$refs.main2;this.myChart2=o.S1(e);let s=this.$refs.main3;this.myChart3=o.S1(s);let i=this.$refs.main;this.myChart=o.S1(i);let a=this.$refs.main4;this.myChart4=o.S1(a),this.into()},created(){this.date=this.$store.state.date,this.res2.forEach((t=>{-1==this.setOption2.indexOf(t.分组)&&this.setOption2.push(t.分组)})),"全部"==this.$store.state.search&&this.$store.commit("showChange",this.setOption2),this.setOption2=this.$store.state.setOption,this.search2=this.$store.state.search}},h=r,l=s(3945),n=(0,l.Z)(h,i,a,!1,null,"6e39061a",null),c=n.exports}}]);
//# sourceMappingURL=439.3f03c18d.js.map